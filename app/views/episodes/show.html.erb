<h1><%= @show.name %></h1>
<h3><%= @episode.episode_number %></h3>

<div class="col-xs-6 hidden-print">
  <p class="add" data-toggle="collapse" data-target="#cue-creation">Add a Cue +</p>
  <div id="cue-creation" class="collapse">
    <%= form_for @cue do |f| %>
      <%= f.hidden_field :episode_id, value: @episode.id %>
      <%= f.label :character %>
      <%= f.select :character, @show.characters.map {|c| c.name} %><br />
      <%= f.label :start_time %>
      <%= f.text_field :start_time, class: 'timestamp' %><br />
      <%= f.label :end_time %>
      <%= f.text_field :end_time, class: 'timestamp' %><br />
      <%= f.label :dialogue %>
      <%= f.text_area :dialogue %><br />
      <%= f.label :notes %>
      <%= f.text_area :notes %><br />
      <%= f.label :private_notes %>
      <%= f.text_area :private_notes %><br />
      <%= f.label :omit %>
      <%= f.check_box :omit %><br />
      <%= f.submit %>
    <% end %>
  </div>
</div>

<div class="col-xs-6 hidden-print">
  <p data-toggle="collapse" data-target="#character-list" class="add">Character List +</p>
  <div id="character-list" class="collapse">
    <div class="col-xs-6">
      Character
    </div>
    <div class="col-xs-6">
      Actor
    </div>
    <br class="clear"/>
    <hr class="double"/>
    <% @show.characters.each do |character| %>
      <div class="col-xs-6">
        <%= character.name %>
      </div>
      <div class="col-xs-6">
        <%= character.actor %>
      </div>
      <br class="clear"/>
      <hr class="single"/>
    <% end %>
  </div>
  <p class="add" data-toggle="collapse" data-target="#character-creation">Add a Character +</p>
  <div id="character-creation" class="collapse">
    <%= form_for [@episode, @character] do |f| %>
      <%= f.hidden_field :episode_id, value: @episode.id %>
      <%= f.label :name %>
      <%= f.text_field :name %><br />
      <%= f.label :actor %>
      <%= f.text_field :actor %><br />
      <%= f.submit %>
    <% end %>
  </div>
  <div class="btn-group">
    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Generate Cue Sheet <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
      <li><%= link_to 'All Characters', episode_characters_path(@episode), class: "dropdown-item" %></li>
      <% @show.characters.each do |character| %>
        <li><%= link_to character.name, episode_character_path(@episode, character), class: "dropdown-item" %></li>
      <% end %>
    </ul>
  </div>
</div>

<br class="clear"/>
<br />

<div class="col-xs-2">
  Character
</div>
<div class="col-xs-2">
  Start/End
</div>
<div class="col-xs-4">
  Dialogue
</div>
<div class="col-xs-2">
  Notes
</div>
<div class="col-xs-2">
  Omit
</div>

<br class="clear"/>
<hr class="double"/>

<% @cues.each do |cue| %>
  <div class="col-xs-2">
    <%= cue.character.name %>
  </div>
  <div class="col-xs-2">
    <p><%= cue.start_time %></p>
    <p><%= cue.end_time %></p>
  </div>
  <div class="col-xs-4">
    "<%= cue.dialogue %>"
  </div>
  <div class="col-xs-2">
    <p><%= cue.notes %></p>
    <p><%= cue.private_notes %></p>
  </div>
  <div class="col-xs-2">
    <% if cue.omit %>
      <input type="checkbox" checked="true" class="omit">
    <% else %>
      <input type="checkbox" class="omit">
    <% end %>
  </div>
  <br class="clear"/>
  <hr class="single"/>
<% end %>
